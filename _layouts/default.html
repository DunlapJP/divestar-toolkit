<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>{{ page.title | default: site.title }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="{{ site.baseurl }}/assets/images/logo.png">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css?v={{ site.github.build_revision }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="page-container">
        <header class="header-container">
            <img src="{{ site.baseurl }}/assets/images/logo.png" alt="Divest for AR Future Logo" class="logo">
            <div>
                <h1 class="site-title">{{ site.title }}</h1>
                <p class="site-description">{{ site.description }}</p>
            </div>
        </header>

        <nav>
            <ul>
                <li><a href="{{ site.baseurl }}/">Home</a></li>
                <li><a href="{{ site.baseurl }}/dashboard.html">Investment Dashboard</a></li>
                <li><a href="{{ site.baseurl }}/source-documents/">Evidence Archive</a></li>
                <li><a href="{{ site.baseurl }}/key-officials/">Key Decision-Makers</a></li>
                <li><a href="{{ site.baseurl }}/action-templates/">Take Action</a></li>
                <li><a href="{{ site.baseurl }}/foia-resources/">FOIA Resources</a></li>
            </ul>
        </nav>

        <main class="main-content">
            {{ content }}
        </main>

        <footer class="footer-container">
            <p>&copy; {%- assign current_year = 'now' | date: '%Y' -%}{{ current_year }} Divest for AR Future. The content of this repository is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
        </footer>
    </div>

    <div id="trusteeModal" class="modal">
      <div class="modal-content">
        <span class="modal-close">&times;</span>
        <h2 id="modalName">Trustee Name</h2>
        <p id="modalTitle">Trustee Title</p>
        <p id="modalType">Trustee Type</p>
        <div class="modal-contact-info">
            <div id="modalEmailContainer">
                <strong>Email:</strong>
                <a id="modalEmailLink" href="#"></a>
            </div>
            <div id="modalPhoneContainer">
                <strong>Phone:</strong>
                <a id="modalPhoneLink" href="#"></a>
            </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  // Animation Observer
  const sections = document.querySelectorAll('.kpi, .trustee-card, .timeline-item, .document-card, .cta-box');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  }, {
    threshold: 0.1
  });
  sections.forEach(section => {
    section.classList.add('fade-in-section');
    observer.observe(section);
  });

  // Modal Logic
  const modal = document.getElementById("trusteeModal");
  const triggers = document.querySelectorAll(".modal-trigger");
  const closeButton = document.querySelector(".modal-close");

  function openModal(event) {
    const card = event.currentTarget;
    const name = card.dataset.name;
    const title = card.dataset.title;
    const type = card.dataset.type;
    const email = card.dataset.email;
    const phone = card.dataset.phone;

    document.getElementById("modalName").textContent = name;
    document.getElementById("modalTitle").textContent = title;
    document.getElementById("modalType").textContent = type;

    const emailContainer = document.getElementById("modalEmailContainer");
    const emailLink = document.getElementById("modalEmailLink");
    if (email) {
      emailLink.href = `mailto:${email}`;
      emailLink.textContent = email;
      emailContainer.style.display = "block";
    } else {
      emailContainer.style.display = "none";
    }
    
    const phoneContainer = document.getElementById("modalPhoneContainer");
    const phoneLink = document.getElementById("modalPhoneLink");
    if (phone) {
      phoneLink.href = `tel:${phone}`;
      phoneLink.textContent = phone;
      phoneContainer.style.display = "block";
    } else {
      phoneContainer.style.display = "none";
    }
    
    modal.style.display = "block";
    document.body.classList.add("modal-open");
  }

  function closeModal() {
    modal.style.display = "none";
    document.body.classList.remove("modal-open");
  }

  triggers.forEach(trigger => {
    trigger.addEventListener("click", openModal);
  });

  if (closeButton) {
    closeButton.addEventListener("click", closeModal);
  }

  window.addEventListener("click", function(event) {
    if (event.target == modal) {
      closeModal();
    }
  });
  
  window.addEventListener("keydown", function(event) {
    if (event.key === "Escape") {
      closeModal();
    }
  });
});
</script>
</body>
</html>
